/*
 http://www.opensource.org/licenses/mit-license.php MIT-LICENSE

 @requires jQuery

*/
(function($){$.i18n={languages:{},current_locale:null,body:null,init:function(locale){if(!locale)throw"No initial locale was set.";this.body=$(document);this.set_locale(locale)},set_locale:function(locale){if(!this.languages[locale])throw"undefined dictionary '"+locale+"'";if(this.current_locale!==locale){this.current_locale=locale;this.load_locales()}},get:function(translation){translation=translation.split(".");var text=this.languages[this.current_locale];for(i=0;i<translation.length;i++)text=text[translation[i]];
if(typeof text!=="string")throw"'"+translation+"' is not a string.";return text},reload:function(context){this.load_locales(context)},load_locales:function(context){var self=this;if(!context)context=this.body;context.find("*[i18n]").each(function(){var $this=$(this),attribute=$this.attr("i18n-attr"),translation=$this.attr("i18n"),i=0;var text=self.get(translation);if(typeof attribute!=="undefined")$this.attr(attribute,text);else switch($this.prop("tagName").toLowerCase()){case "textarea":case "input":$this.val(text);
break;default:$this.html(text);break}})}}})(jQuery);
